!function(t){"use strict";t("audio[controls]").before(function(){var e=this;e.controls=!1;var n=document.createElement("div");t(n).addClass(t(e).attr("class")+" play container-fluid playa");var a=document.createElement("section");t(a).addClass("collapsing center-block row col-sm-12");var o=document.createElement("div");t(o).addClass("btn-group center-block row col-sm-12");var i=document.createElement("button");t(i).html('<i class="glyphicon glyphicon-align-justify" style="top:-3px"></i>'),t(i).addClass("btn btn-default btn-lg btn-block row col-sm-12"),t(i).attr("style","opacity:0.3"),t(i).click(function(){t(a).collapse("toggle")}),t(i).attr("title","Details"),t(i).tooltip({container:"body",placement:"top",html:!0}),t(o).append(i);var l=document.createElement("table");t(l).addClass("table table-condensed");var r=document.createElement("section");t(r).addClass("btn-group  center-block row  col-sm-12");var d=function(){t(n).find(".btn").addClass("disabled"),t(n).find('input[type="range"]').hide(),t(n).find(".glyphicon-refresh").text("Error"),t(n).find(".glyphicon-refresh").parent().attr("title","There was an error loading the audio."),t(n).find(".glyphicon-refresh").parent().tooltip("fixTitle"),t(n).find(".glyphicon-refresh").removeClass("glyphicon glyphicon-refresh spin")},c=function(){var n=document.createElement("button");t(n).addClass("btn  btn-default disabled col-sm-1"),n.setPlayState=function(a){t(n).removeClass("disabled"),"play"===a&&(t(n).html('<i class="glyphicon glyphicon-play"></i>'),t(n).click(function(){e.play()})),"pause"===a&&(t(n).html('<i class="glyphicon glyphicon-pause"></i>'),t(n).click(function(){e.pause()}))},t(e).on("play",function(){n.setPlayState("pause")}),t(e).on("canplay",function(){n.setPlayState("play")}),t(e).on("pause",function(){n.setPlayState("play")});var a=0,o=setInterval(function(){return isNaN(e.duration)===!1?(n.setPlayState("play"),clearInterval(o),!0):3===e.networkState||100===a?(console.log("No audio source was found or a timeout occurred"),d(),clearInterval(o),!1):void a++},100);t(r).append(n)},s=function(){var n=document.createElement("input");t(n).attr({type:"range",min:0,value:0,"class":"seek"}),n.progress=function(){var a,o,i,l="rgba(223, 240, 216, 1) 0%";for(l+=", rgba(223, 240, 216, 1) "+e.currentTime/e.duration*100+"%",l+=", rgba(223, 240, 216, 0) "+e.currentTime/e.duration*100+"%",a=0;a<e.buffered.length;a++)e.buffered.end(a)>e.currentTime&&isNaN(e.buffered.end(a))===!1&&isNaN(e.buffered.start(a))===!1&&(i=e.buffered.end(a)<e.duration?e.buffered.end(a)/e.duration*100:100,o=e.buffered.start(a)>e.currentTime?e.buffered.start(a)/e.duration*100:e.currentTime/e.duration*100,l+=", rgba(217, 237, 247, 0) "+o+"%",l+=", rgba(217, 237, 247, 1) "+o+"%",l+=", rgba(217, 237, 247, 1) "+i+"%",l+=", rgba(217, 237, 247, 0) "+i+"%");t(n).css("background","-webkit-linear-gradient(left, "+l+")"),t(n).css("background-color","#ddd")},n.set=function(){t(n).val(e.currentTime),n.progress()},n.slide=function(){e.currentTime=t(n).val(),n.progress()},n.init=function(){t(n).attr({max:e.duration,step:e.duration/100}),n.set()},n.reset=function(){t(n).val(0),e.currentTime=t(n).val(),e.loop?e.play():e.pause()};var a=document.createElement("div");t(a).addClass("btn btn-default col-sm-4 hidden-xs"),t(a).append(n),t(n).on("change",n.slide),t(e).on("timeupdate",n.init),t(e).on("loadedmetadata",n.init),t(e).on("loadeddata",n.init),t(e).on("progress",n.init),t(e).on("canplay",n.init),t(e).on("canplaythrough",n.init),t(e).on("ended",n.reset),e.readyState>0&&n.init(),t(r).append(a)},u=function(){var n=document.createElement("button");t(n).addClass("btn btn-default col-sm-3"),t(n).tooltip({container:"body",placement:"right",html:!0}),n.twodigit=function(t){return("0"+t).slice(-2)},n.timesplit=function(t){if(isNaN(t))return'<i class="glyphicon glyphicon-refresh spin"></i>';var e=Math.floor(t/3600),a=Math.floor(t/60)-60*e,o=Math.floor(t)-3600*e-60*a,i=n.twodigit(a)+":"+n.twodigit(o);return e>0&&(i=e+":"+i),i},n.showtime=function(){var a='Click to Reset<hr style="padding:0; margin:0;" />Position: ',o='Click to Reset<hr style="padding:0; margin:0;" />Length: ';e.paused?(t(n).html(n.timesplit(e.duration)),t(n).attr({title:a+n.timesplit(e.currentTime)})):(t(n).html(n.timesplit(e.currentTime)),t(n).attr({title:o+n.timesplit(e.duration)})),t(n).tooltip("fixTitle")},t(n).click(function(){e.pause(),e.currentTime=0,n.showtime(),t(n).tooltip("fixTitle"),t(n).tooltip("show")}),t(n).tooltip("show"),t(e).on("loadedmetadata",n.showtime),t(e).on("loadeddata",n.showtime),t(e).on("progress",n.showtime),t(e).on("canplay",n.showtime),t(e).on("canplaythrough",n.showtime),t(e).on("timeupdate",n.showtime),e.readyState>0?n.showtime():t(n).html('<i class="glyphicon glyphicon-refresh spin"></i>'),t(r).append(n)},m=function(){var n=document.createElement("button");t(n).addClass("btn btn-default  col-sm-1"),n.checkVolume=function(){e.volume>.5&&!e.muted?t(n).html('<i class="glyphicon glyphicon-volume-up"></i>'):e.volume<.5&&e.volume>0&&!e.muted?t(n).html('<i class="glyphicon glyphicon-volume-down"></i>'):t(n).html('<i class="glyphicon glyphicon-volume-off"></i>')},t(n).click(function(){e.muted?(e.muted=!1,e.volume=e.oldvolume):(e.muted=!0,e.oldvolume=e.volume,e.volume=0),n.checkVolume()}),n.checkVolume(),t(e).on("volumechange",n.checkVolume),t(r).append(n)},p=function(){var n=document.createElement("input");t(n).attr({type:"range",min:0,max:1,step:.01,value:1}),n.slide=function(){e.muted=!1,e.volume=t(n).val()},n.set=function(){t(n).val(e.volume)};var a=document.createElement("div");t(a).addClass("btn  btn-default  row col-sm-3  hidden-xs"),t(a).append(n),t(n).on("change",n.slide),t(e).on("volumechange",n.set),t(r).append(a)},f=function(){var n=document.createElement("img");t(n).addClass("thumbnail"),t(n).attr("src",t(e).data("infoAlbumArt")),t(a).append(n)},h=function(n,a){var o=document.createElement("tr"),i=document.createElement("th"),r=document.createElement("td");t(i).html(n),t(r).html(t(e).data(a)),t(o).append(i),t(o).append(r),t(l).append(o)},g=function(){"undefined"!=typeof t(e).data("infoAlbumArt")&&f(),"undefined"!=typeof t(e).data("infoArtist")&&h("Artist","infoArtist"),"undefined"!=typeof t(e).data("infoTitle")&&h("Title","infoTitle"),"undefined"!=typeof t(e).data("infoAlbumTitle")&&h("Album","infoAlbumTitle"),"undefined"!=typeof t(e).data("infoLabel")&&h("Label","infoLabel"),"undefined"!=typeof t(e).data("infoYear")&&h("Year","infoYear"),""!==t(l).html()&&(t(a).append(l),t(n).append(o),t(n).append(a))},y=function(){"off"!==t(e).data("play")&&c(),"off"!==t(e).data("seek")&&s(),"off"!==t(e).data("time")&&u(),"off"!==t(e).data("mute")&&m(),"off"!==t(e).data("volume")&&p(),t(n).append(r)},b=function(){var a=document.createElement("div");if(t(a).addClass("row col-sm-10 col-sm-offset-1"),"undefined"!=typeof t(e).data("infoAttLink")){var o=document.createElement("a");t(o).addClass("text-muted btn btn-link btn-sm"),t(o).attr("href",t(e).data("infoAttLink")),t(o).html(t(e).data("infoAtt")),t(a).append(o)}else t(a).html(t(e).data("infoAtt"));t(n).append(a)},v=function(){g(),y(),"undefined"!=typeof t(e).data("infoAtt")&&b()};return v(),t(e).on("error",function(){console.log("Error encountered after fillPlayerBox"),d()}),n})}(jQuery);